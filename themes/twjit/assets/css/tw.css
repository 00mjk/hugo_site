@import '/themes/twjit/assets/css/reset.css';
@import '/themes/twjit/assets/css/chroma_monokai_tweaked.css';
@import '/themes/twjit/assets/css/chroma_fix-all.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* ============================
  START, from original global.css
  ============================= */
  html {
    scroll-padding-top: 80px;
    @apply font-serif;
  }

  main, #content-main-hugo {
    @apply pt-10 lg:pt-12; /* needed in Eleventy repo; handled elsewhere in Hugo repo */
  }

  p, li {
    /* for handling Markdown-created <p> and <li> */
    @apply mb-3 text-lg;
  }

  ul li, ul li li {
    @apply list-disc;
  }

  ul li li li {
    @apply list-square;
  }

  ul, ol {
    @apply pl-8;
  }

  ol {
    @apply list-decimal;
  }

  a {
    @apply no-underline border-b text-blue-500 border-blue-500 dark:text-blue-100 dark:border-blue-100;
    &:focus, &:hover, &:active {
      @apply text-blue-600 border-blue-600 dark:text-gray-300 dark:border-blue-100;
    }
  }

  sup a, a.previous, a.next, .footnote-return {
    @apply border-b-0;
  }

  h1, .h1, h2, .h2, h3, .h3, h4, .h4, h5, .h5, h6, .h6 {
    @apply font-sans font-bold leading-tight tracking-tight;
  }

  h1, .h1 {
    @apply text-4xl mb-4;
    font-weight: 825;
  }

  h2, .h2, h3, .h3, h4, .h4, h5, .h5, h6, .h6 {
    font-weight: 625;
  }

  h2, .h2 {
    @apply text-4xl;
  }

  h3, .h3 {
    @apply text-3xl;
  }

  h4 {
    @apply text-2xl;
  }

  .h4 {
    @apply text-2xl; /* oddity in Hugo/TWCSS JIT */
  }

  h3, .h3, h5, .h5 {
    @apply italic;
  }

  h5, .h5, h6, .h6 {
    @apply text-lg;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply outline-none active:outline-none focus:outline-none hover:outline-none;
  }

  .header-anchor {
    @apply border-0 hover:border-b-2 hover:border-blue-500 dark:hover:border-blue-100 text-black hover:text-blue-500 dark:text-white dark:hover:text-blue-100;
    &:hover::after {
      @apply text-base pl-2;
      content: "#";
    }
  }

  article h1, article h2, article h3, article h4 {
    @apply tracking-tight mt-8 mb-6;
  }

  article p, li {
    @apply text-lg mt-6 mb-6 leading-relaxed md:text-xl 2xl:text-2xl;
  }

  article img.containedImage, article picture img {
    @apply min-w-full max-w-full w-full h-auto;
    /* latter two for no-jank in Chrome and Firefox */
  }

  blockquote {
    @apply px-6 text-gray-700 dark:text-gray-300 border-l-4 border-gray-300 dark:border-gray-400;
  }

  hr {
    @apply border-solid border-gray-900 dark:border-gray-100;
  }

  /* ============================
  END, from original global.css
  ============================= */

  /* =======================================
  START, adapted from original footnotes.css
  ========================================== */
  /* start, footnotes */

  .footnotes, .footnote-sim, .footnote-ref {
    @apply font-sans;
  }

  .footnote-sim {
    @apply text-blue-500 dark:text-blue-100;
  }

  .footnotes {
    & ol {
      @apply mt-4 pis-6;
    }
    & ol li {
      @apply text-sm;
    }
    & li p {
      @apply text-sm leading-5;
    }
    & .footnote-backref {
      @apply text-sm;
    }
  }

  article .footnotes ol li, article .footnotes ol li p {
    @apply my-4 py-0;
  }

  a.footnote-ref {
    @apply text-blue-500 dark:text-blue-100;
  }

  sup[id^='fn'], .footnote-sim {
    font-size: 65%;
  }

  /* == end, footnotes */

  /* =======================================
  END, adapted from original footnotes.css
  ======================================== */
}

@layer components {

  /* ============================
  START, from original tables.css
  ============================= */
  table {
    @apply font-sans;
  }

  table.leagues {
    @apply w-11/12 mt-4 mx-auto mb-0 border-0 border-collapse;
  }

  table.leagues td.col {
    @apply w-1/2;
  }

  @media (min-width: 900px) {
    table.leagues {
      @apply w-3/5;
    }
    table.noborders {
      @apply w-11/12;
    }
  }

  table.noborders {
    @apply w-full border-0 border-collapse mt-6 mx-auto mb-4;
  }

  table.noborders td {
    @apply text-gray-800 text-left align-middle py-1 pr-0 pl-2;
    /* text-align: left !important; */
  }

  table.noborders td img {
    @apply inline-block align-middle m-0;
  }

  table.noborders tr {
    @apply bg-blue-100;
  }

  table.noborders tr:nth-child(even) {
    @apply bg-gray-200;
  }

  table.noborders thead tr {
    @apply bg-blue-700;
  }

  table.noborders thead td {
    @apply text-white font-bold;
  }

  table.noborders td.td70 {
    @apply w-[70%];
  }

  table.noborders td.td70 img {
    @apply block w-1/2 h-auto max-w-[50%];
  }

  table.noborders td.td30 {
    @apply w-[30%];
  }

  /* ============================
  END, from original tables.css
  ============================= */

  /* =========================
  START, from original nav.css
  ========================== */

  #nav-Checkbox:checked ~ ul.nav-Menu li,
  #nav-Checkbox:checked ~ label#nav-Toggle #svg-close {
    @apply block;
  }
  #nav-Checkbox:checked ~ label#nav-Toggle #svg-menu {
    @apply hidden;
  }
  #nav-Checkbox:checked ~ ul.nav-Menu {
    @apply pb-4;
  }

  /* =========================
  END, from original nav.css
  ========================== */

  /* ==============================
  START, from original lazyload.css
  =============================== */
  /* from vanilla-lazyload */
  .lazy {
    @apply opacity-0;
  }

  .lazy:not(.initial) {
    @apply transition-opacity duration-500 ease-in-out;
    /* transition: opacity 0.4s; */
  }

  .lazy.initial,
  .lazy.loaded,
  .lazy.error {
    @apply opacity-100;
  }

  .lazy:not([src]) {
    @apply invisible;
  }
  /* end of CSS from vanilla-lazyload */

  /* ==============================
  END, from original lazyload.css
  =============================== */

  /* ===================================
  START, from original lite-yt-embed.css
  =================================== */

  lite-youtube {
    @apply bg-black relative block bg-center bg-cover cursor-pointer max-w-[720px];
  }

  /* gradient */
  lite-youtube::before {
    content: '';
    @apply block absolute top-0 bg-top bg-repeat-x h-[60px] pb-[50px] w-full;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==);
    transition: all 0.2s cubic-bezier(0, 0, 0.2, 1);
  }

  /* responsive iframe with a 16:9 aspect ratio
    thanks https://css-tricks.com/responsive-iframes/
  */
  lite-youtube::after {
    content: "";
    display: block;
    padding-bottom: calc(100% / (16 / 9));
  }
  lite-youtube > iframe {
    @apply w-full h-full absolute top-0 left-0 border-0;
  }

  /* play button */
  lite-youtube > .lty-playbtn {
    @apply w-[68px] h-[48px] absolute cursor-pointer top-1/2 left-1/2 z-[1] bg-transparent border-none;
    transform: translate3d(-50%, -50%, 0);
    /* YT's actual play button svg */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 68 48"><path fill="%23f00" fill-opacity="0.8" d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z"></path><path d="M 45,24 27,14 27,34" fill="%23fff"></path></svg>');
    filter: grayscale(100%);
    transition: filter .1s cubic-bezier(0, 0, 0.2, 1);
  }

  lite-youtube:hover > .lty-playbtn,
  lite-youtube .lty-playbtn:focus {
    filter: none;
  }

  /* Post-click styles */
  lite-youtube.lyt-activated {
    cursor: unset;
  }
  lite-youtube.lyt-activated::before,
  lite-youtube.lyt-activated > .lty-playbtn {
    @apply opacity-0 pointer-events-none;
  }

  .lyt-visually-hidden {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    @apply h-[1px] overflow-hidden absolute whitespace-nowrap w-[1px];
  }

  /* ===================================
  END, from original lite-yt-embed.css
  =================================== */

}

@layer utilities {

  /* =============================
  START, from original utility.css
  ============================== */

  .yellowBox, .blueBox {
    @apply font-sans border border-gray-900 border-solid mx-auto my-8 w-full p-8 dark:bg-gray-800 dark:border-gray-500;
  }

  .yellowBox {
    @apply bg-yellow-100 dark:bg-yellow-900;
  }

  .yellowBox a {
    @apply text-blue-700 border-blue-700 dark:text-blue-100 dark:border-blue-100;
    &:focus, &:active, &:hover {
      @apply dark:text-blue-200 dark:border-blue-200;
    }
  }

  .blueBox {
    @apply text-sm bg-sky-100 dark:bg-blue-900;
  }

  .lazypicturecaption, .imgcCaption {
    @apply font-sans text-sm p-0 mt-2 leading-snug text-center;
  }

  .indentAfterLI {
    @apply ml-8;
  }

  .punctuationExample {
    @apply font-serif text-2xl text-center;
  }

  .navWhite, .navWhite:visited {
    @apply text-white;
  }

  .navWhite:focus, .navWhite:active {
    @apply text-gray-400;
  }

  .text-blue-light {
    @apply text-blue-500;
  }

  .text-blue-dark { /* for dark mode */
    @apply text-blue-200;
  }

  .ctr {
    @apply text-center;
  }

  .legal {
    @apply text-xs;
  }

  span.caption {
    text-shadow: none; /* keeps link borders from looking "dirty" */
  }

  span.caption a {
    @apply text-blue-100 border-blue-100;
    &:focus, &:hover, &:active {
      @apply text-blueGray-200 border-blue-100;
    }
  }

  .imgCover {
    @apply object-cover object-center h-full w-full;
  }

  .background-hero-title-text {
    text-shadow: 4px 4px 2px #000;
  }

  .text-nowrap, .text-nobrk {
    @apply whitespace-nowrap;
  }

  #collapse-button.hamburger:before {
    font-size: 150%;
    content: "\2630"; /* same as &#9776; HTML entity */
  }

  #collapse-button.close:before {
    font-size: 170%;
    content: "\00D7"; /* same as &times; HTML entity */
  }

  .twitter-tweet {
    @apply mt-4 mx-auto mb-0 p-1 rounded-xl bg-white border-2 border-solid border-gray-700 dark:border-gray-300;
  }

  a .twitter-tweet {
    @apply m-0;
  }
  /* =============================
  END, from original utility.css
  ============================== */
}
/* === handling system-font-stack obliquing issues in Firefox */

@supports (-moz-appearance: none) {
  .italic, i, cite, em, var, address, dfn, h3, .h3, h5, .h5 {
    font-style: oblique 8deg;
  }
}

/* === end, handling system-font-stack obliquing issues in Firefox */
