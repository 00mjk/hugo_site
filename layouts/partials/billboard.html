{{- /*
	h/t to Joe Mooring's answer in
	https://discourse.gohugo.io/t/count-word-function-customized-to-exclude-code/34380
*/ -}}
{{- $wordCount := replaceRE `(?s)<div class="highlight">.*?</div>` "" .Content | countwords -}}
{{- $readingTime := div (float $wordCount) 213 | math.Ceil -}}
{{- $wordCountFmt := lang.FormatNumberCustom 0 $wordCount -}}
<div class="billboard-div">
	<div class="billboard-title-block">
		<h1 class="billboard-title-text">{{ .Title | .Page.RenderString }}</h1>
		{{- if .Params.Description }}<p class="billboard-description-text">{{ .Params.Description }}</p>{{- end }}
		<p class="billboard-p-text">
			{{- if ne (substr .Title 0 22) "The site this week: 20" -}}<strong>{{ .PublishDate.Format "2006-01-02" }}</strong>{{- else -}}&nbsp;{{- end -}}<br /><span class="seventyFive">
			{{- if ne (.PublishDate.Format "2006-01-02") (.Lastmod.Format "2006-01-02") }}
			Last modified {{ .Lastmod.Format "2006-01-02" }}{{- else -}}&nbsp;
			{{- end }}</span>
		</p>
		<p class="ctr legal">
			{{- if $.GitInfo -}}Latest&nbsp;commit:&nbsp;<a class="mono" href="https://github.com/brycewray/hugo_site/commit/{{ .GitInfo.Hash }}" rel="noopener">{{ .GitInfo.AbbreviatedHash }}</a>{{- else -}}&nbsp;{{- end }}<br />
			{{ $wordCountFmt }} words &bull; Reading time: {{ $readingTime }} minute{{ if (gt $readingTime 1) }}s{{ end }}
		</p>
	</div>
</div>
